<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Permisos y Medios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="container">

   
    <p class="section-title">Permisos</p>

    <ion-button expand="block" (click)="solicitarPermisos()">
      Solicitar permisos
    </ion-button>

    <ion-card>
      <ion-card-content>
        <p><strong>Cámara:</strong> {{ estadoCamara }}</p>
        <p><strong>Micrófono:</strong> {{ estadoMicrofono }}</p>
      </ion-card-content>
    </ion-card>

    
    <p class="section-title">Cámara</p>

    <video #video autoplay playsinline></video>

    <ion-button expand="block" (click)="tomarFoto()">
      Tomar foto
    </ion-button>

    <img *ngIf="foto" [src]="foto" class="preview-image" />

    
    <p class="section-title">Grabación de audio</p>

    <ion-button expand="block" color="secondary" (click)="grabarAudio()">
      Grabar audio (5 segundos)
    </ion-button>

    <ion-card *ngIf="audioUrl">
      <ion-card-content>
        <p><strong>Estado:</strong> {{ estadoGrabacion }}</p>
        <audio [src]="audioUrl" controls></audio>
      </ion-card-content>
    </ion-card>

    
    <p class="section-title">Análisis de texto</p>

    <ion-card>
      <ion-card-content>

        <ion-input
          placeholder="Escribe un texto para analizar"
          [(ngModel)]="textoAnalizar">
        </ion-input>

        <ion-button expand="block" (click)="analizarTexto()">
          Analizar texto
        </ion-button>

        <ion-spinner
          *ngIf="cargandoApi"
          style="display:block; margin:15px auto;">
        </ion-spinner>

        <div *ngIf="resultadoSentimiento" class="resultado">
          <p><strong>Resultado:</strong> {{ resultadoSentimiento }}</p>
          <p><strong>Confianza:</strong> {{ confianza }}%</p>
        </div>

      </ion-card-content>
    </ion-card>

  </div>
</ion-content>


